{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{BarChart,Bar,XAxis,YAxis,Tooltip,ResponsiveContainer,PieChart,Pie,Cell,Legend}from\"recharts\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Analytics(){const[data,setData]=useState([]);const[loading,setLoading]=useState(true);// State to manage loading\nconst[error,setError]=useState(null);// State to manage error\nuseEffect(()=>{const fetchData=async()=>{try{const res=await axios.get(\"http://localhost:5000/api/analytics\");setData(res.data);}catch(err){console.error(\"Error fetching analytics data\",err.message);setError(\"Failed to load analytics data. Please try again later.\");}finally{setLoading(false);// Set loading to false after fetching\n}};fetchData();},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading analytics data...\"});// Loading state\nif(error)return/*#__PURE__*/_jsx(\"div\",{children:error});// Error state\nconst pieData=[{name:\"Resolved\",value:data.filter(d=>d.status===\"Resolved\").length},{name:\"Pending\",value:data.filter(d=>d.status!==\"Resolved\").length}];const COLORS=[\"#00C49F\",\"#FF8042\"];return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto mt-10 p-6 bg-white rounded-xl shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800 mb-6\",children:\"Analytics Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h-80\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:\"Complaints by Department\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(BarChart,{data:data,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"department\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",fill:\"#8884d8\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-80\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:\"Resolution Status\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:pieData,dataKey:\"value\",nameKey:\"name\",outerRadius:80,label:true,children:pieData.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},`cell-${index}`))}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Tooltip,{})]})})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","BarChart","Bar","XAxis","YAxis","Tooltip","ResponsiveContainer","PieChart","Pie","Cell","Legend","jsx","_jsx","jsxs","_jsxs","Analytics","data","setData","loading","setLoading","error","setError","fetchData","res","get","err","console","message","children","pieData","name","value","filter","d","status","length","COLORS","className","width","height","dataKey","fill","nameKey","outerRadius","label","map","entry","index"],"sources":["C:/Users/soham/Downloads/JantaVoice/frontend/src/pages/Analytics.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Legend,\r\n} from \"recharts\";\r\n\r\nexport default function Analytics() {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true); // State to manage loading\r\n  const [error, setError] = useState(null); // State to manage error\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await axios.get(\"http://localhost:5000/api/analytics\");\r\n        setData(res.data);\r\n      } catch (err) {\r\n        console.error(\"Error fetching analytics data\", err.message);\r\n        setError(\"Failed to load analytics data. Please try again later.\");\r\n      } finally {\r\n        setLoading(false); // Set loading to false after fetching\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (loading) return <div>Loading analytics data...</div>; // Loading state\r\n  if (error) return <div>{error}</div>; // Error state\r\n\r\n  const pieData = [\r\n    { name: \"Resolved\", value: data.filter((d) => d.status === \"Resolved\").length },\r\n    { name: \"Pending\", value: data.filter((d) => d.status !== \"Resolved\").length },\r\n  ];\r\n\r\n  const COLORS = [\"#00C49F\", \"#FF8042\"];\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto mt-10 p-6 bg-white rounded-xl shadow-md\">\r\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Analytics Dashboard</h2>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n        <div className=\"h-80\">\r\n          <h3 className=\"text-lg font-semibold mb-2\">Complaints by Department</h3>\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <BarChart data={data}>\r\n              <XAxis dataKey=\"department\" />\r\n              <YAxis />\r\n              <Tooltip />\r\n              <Bar dataKey=\"count\" fill=\"#8884d8\" />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        <div className=\"h-80\">\r\n          <h3 className=\"text-lg font-semibold mb-2\">Resolution Status</h3>\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <PieChart>\r\n              <Pie data={pieData} dataKey=\"value\" nameKey=\"name\" outerRadius={80} label>\r\n                {pieData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                ))}\r\n              </Pie>\r\n              <Legend />\r\n              <Tooltip />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}